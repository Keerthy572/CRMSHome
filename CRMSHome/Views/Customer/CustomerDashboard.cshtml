@model IEnumerable<CRMSHome.Models.Car>
@{
    Layout = "_CustomerLayout";
    ViewData["Active"] = "Dashboard";
    ViewData["Title"] = "Available Cars";
}


<!-- Payment Success Alert -->
@if (TempData["PaymentMessage"] != null)
{
    <script>
        alert('@TempData["PaymentMessage"]');
    </script>
}
<link rel="stylesheet" href="~/css/customerdashboard.css" />

<h2 class="mb-5 text-center fw-bold">Available Cars</h2>

<div class="row row-cols-1 row-cols-md-3 g-4">
    @foreach (var car in Model)
    {
        <div class="col">
            <div class="card h-100 car-card shadow-sm position-relative">

                <!-- Ribbon for booked cars -->
                @if (car.BookingStatus == "Booked")
                {
                    <div class="ribbon">Booked</div>
                }

                <!-- Car Image -->
                <img src="@car.ImagePath"
                     alt="@car.Brand @car.Model"
                     class="card-img-top car-image" />

                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">@car.Brand</h5>
                    <p class="card-text mb-2">
                        <strong>Model:</strong> @car.Model <br />
                        <strong>Seats:</strong> @car.SeatCapacity <br />
                        <strong>Price/Day:</strong> Rs.@car.RentPerDay
                    </p>
                    <span class="badge @(car.BookingStatus == "Booked" ? "bg-danger" : "bg-success")">
                        @car.BookingStatus
                    </span>
                </div>

                <div class="card-footer text-center bg-white border-0">
                    @if (car.BookingStatus == "Booked")
                    {
                        <button class="btn btn-secondary w-100" disabled>Already Booked</button>
                    }
                    else
                    {
                        <a href="@Url.Action("Details", "Customer", new { id = car.Id })"
                           class="btn btn-primary w-100 fw-semibold">View Details</a>
                    }
                </div>
            </div>
        </div>
    }
</div>
